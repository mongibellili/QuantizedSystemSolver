<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Tutorial · Quantized System Solver</title><meta name="title" content="Tutorial · Quantized System Solver"/><meta property="og:title" content="Tutorial · Quantized System Solver"/><meta property="twitter:title" content="Tutorial · Quantized System Solver"/><meta name="description" content="Documentation for Quantized System Solver."/><meta property="og:description" content="Documentation for Quantized System Solver."/><meta property="twitter:description" content="Documentation for Quantized System Solver."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Quantized System Solver logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">Quantized System Solver</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Tutorial</a><ul class="internal"><li><a class="tocitem" href="#Solving-a-Nonlinear-ODE-Problem-with-NLodeProblem-in-Julia"><span>Solving a Nonlinear ODE Problem with NLodeProblem in Julia</span></a></li><li><a class="tocitem" href="#Step-1:-Define-the-ODE-Problem"><span>Step 1: Define the ODE Problem</span></a></li><li><a class="tocitem" href="#Step-2:-Solve-the-ODE-Problem"><span>Step 2: Solve the ODE Problem</span></a></li><li><a class="tocitem" href="#Step-3:-Query-the-Solution"><span>Step 3: Query the Solution</span></a></li><li><a class="tocitem" href="#Step-4:-Plot-the-Solution"><span>Step 4: Plot the Solution</span></a></li><li><a class="tocitem" href="#User-Documentation"><span>User Documentation</span></a></li></ul></li><li><a class="tocitem" href="../developperGuide/">developper Guide</a></li><li><a class="tocitem" href="../examples/">Examples</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Tutorial</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Tutorial</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/mongibellili/QuantizedSystemSolver" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/mongibellili/QuantizedSystemSolver/blob/main/docs/src/userGuide.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Tutorial:"><a class="docs-heading-anchor" href="#Tutorial:">Tutorial:</a><a id="Tutorial:-1"></a><a class="docs-heading-anchor-permalink" href="#Tutorial:" title="Permalink"></a></h1><h2 id="Solving-a-Nonlinear-ODE-Problem-with-NLodeProblem-in-Julia"><a class="docs-heading-anchor" href="#Solving-a-Nonlinear-ODE-Problem-with-NLodeProblem-in-Julia">Solving a Nonlinear ODE Problem with NLodeProblem in Julia</a><a id="Solving-a-Nonlinear-ODE-Problem-with-NLodeProblem-in-Julia-1"></a><a class="docs-heading-anchor-permalink" href="#Solving-a-Nonlinear-ODE-Problem-with-NLodeProblem-in-Julia" title="Permalink"></a></h2><p>In this tutorial, we will go through the process of setting up, solving, querying, and plotting a nonlinear ordinary differential equation (ODE) problem using the NLodeProblem function. We will use a buck converter circuit model as an example.</p><h2 id="Step-1:-Define-the-ODE-Problem"><a class="docs-heading-anchor" href="#Step-1:-Define-the-ODE-Problem">Step 1: Define the ODE Problem</a><a id="Step-1:-Define-the-ODE-Problem-1"></a><a class="docs-heading-anchor-permalink" href="#Step-1:-Define-the-ODE-Problem" title="Permalink"></a></h2><p>The first step is to define the ODE problem using the NLodeProblem function. We provide the function with user code that specifies the parameters, variables, and differential equations. Here is the example code for a buck converter circuit model with detailed explanations:</p><pre><code class="language-julia hljs">odeprob = NLodeProblem(quote
    name = (buck,) # Define the name of the problem for identification
    
    # Parameters
    C = 1e-4          # Capacitance in farads
    L = 1e-4          # Inductance in henrys
    R = 10.0          # Resistance in ohms
    U = 24.0          # Input voltage in volts
    T = 1e-4          # Switching period in seconds
    DC = 0.5          # Duty cycle
    ROn = 1e-5        # On-state resistance of the switch in ohms
    ROff = 1e5        # Off-state resistance of the switch in ohms
    
    # Discrete and continuous variables
    discrete = [1e5, 1e-5, 1e-4, 0.0, 0.0] # Initial discrete states
    u = [0.0, 0.0]                        # Initial continuous states
    
    # Rename for convenience
    rd = discrete[1]       # Diode resistance
    rs = discrete[2]       # Switch resistance
    nextT = discrete[3]    # Next switching time
    lastT = discrete[4]    # Last switching time
    diodeon = discrete[5]  # Diode state (on/off)
    il = u[1]              # Inductor current
    uc = u[2]              # Capacitor voltage
    
    # Helper equations
    id = (il * rs - U) / (rd + rs)  # Diode current calculation
    
    # Differential equations
    du[1] = (-id * rd - uc) / L     # Derivative of inductor current
    du[2] = (il - uc / R) / C       # Derivative of capacitor voltage
    
    # Events
    if t - nextT &gt; 0.0 
        lastT = nextT             # Update last switching time
        nextT = nextT + T         # Schedule next switching time
        rs = ROn                  # Set switch to on-state
    end
    
    if t - lastT - DC * T &gt; 0.0 
        rs = ROff                 # Set switch to off-state
    end
    
    if diodeon * id + (1.0 - diodeon) * (id * rd - 0.6) &gt; 0
        rd = ROn                  # Diode is on
        diodeon = 1.0
    else
        rd = ROff                 # Diode is off
        diodeon = 0.0
    end
end)</code></pre><h3 id="Explanation:"><a class="docs-heading-anchor" href="#Explanation:">Explanation:</a><a id="Explanation:-1"></a><a class="docs-heading-anchor-permalink" href="#Explanation:" title="Permalink"></a></h3><p>Parameters: These are constants used in the model. C, L, R, U, T, DC, ROn, ROff are physical constants related to the buck converter circuit.<br/>Discrete and continuous variables: These represent the initial states of discrete and continuous variables in the model.<br/>Renaming variables: For convenience, the elements of discrete and u are renamed to more descriptive variable names (rd, rs, nextT, lastT, diodeon, il, uc).<br/>Helper equations: These are intermediate expressions needed for the differential equations. id is the current through the diode.<br/>Differential equations: These represent the system&#39;s dynamics. du[1] is the rate of change of the inductor current. du[2] is the rate of change of the capacitor voltage.<br/>Events: These are conditions that modify the continous and discrete variables. They handle the switching behavior of the buck converter and the diode&#39;s state transitions.</p><h2 id="Step-2:-Solve-the-ODE-Problem"><a class="docs-heading-anchor" href="#Step-2:-Solve-the-ODE-Problem">Step 2: Solve the ODE Problem</a><a id="Step-2:-Solve-the-ODE-Problem-1"></a><a class="docs-heading-anchor-permalink" href="#Step-2:-Solve-the-ODE-Problem" title="Permalink"></a></h2><p>Next, we solve the ODE problem using the solve function. We need to specify the problem, the algorithm, and the simulation settings.</p><pre><code class="language-julia hljs"># Define the time span for the simulation
tspan = (0.0, 0.001)  # Start at 0 seconds, end at 0.001 seconds
# Solve the ODE problem with the chosen algorithm and settings
sol = solve(odeprob, nmliqss2(), tspan, abstol=1e-4, reltol=1e-3)</code></pre><h3 id="Explanation:-2"><a class="docs-heading-anchor" href="#Explanation:-2">Explanation:</a><a class="docs-heading-anchor-permalink" href="#Explanation:-2" title="Permalink"></a></h3><p>Time span: tspan defines the interval over which the solution is computed, from 0.0 to 0.001 seconds.<br/>Solver function: solve is used to compute the solution.<br/>odeprob is the ODE problem we defined.<br/>nmliqss2() specifies the algorithm used to solve the problem (e.g., qss2,nmliqss1... might be other algorithms).<br/>abstol and reltol are the absolute and relative tolerances for the solver, controlling the accuracy of the solution.</p><h2 id="Step-3:-Query-the-Solution"><a class="docs-heading-anchor" href="#Step-3:-Query-the-Solution">Step 3: Query the Solution</a><a id="Step-3:-Query-the-Solution-1"></a><a class="docs-heading-anchor-permalink" href="#Step-3:-Query-the-Solution" title="Permalink"></a></h2><p>After solving the problem, we can query the solution to extract useful information such as variable values at specific times, the number of steps, events, and more.</p><pre><code class="language-julia hljs"># Get the value of variable 2 at time 0.0005
value_at_time = sol(2, 0.0005)

# Get the total number of steps to end the simulation
total_steps = sol.totalSteps

# Get the number of simultaneous steps during the simulation
simul_step_count = sol.simulStepCount

# Get the total number of events during the simulation
event_count = sol.evCount

# Get the saved times and variables
saved_times = sol.savedTimes
saved_vars = sol.savedVars

# Print the results
println(&quot;Value of variable 2 at time 0.0005: &quot;, value_at_time)
println(&quot;Total number of steps: &quot;, total_steps)
println(&quot;Number of simultaneous steps: &quot;, simul_step_count)
println(&quot;Total number of events: &quot;, event_count)</code></pre><h3 id="Explanation:-3"><a class="docs-heading-anchor" href="#Explanation:-3">Explanation:</a><a class="docs-heading-anchor-permalink" href="#Explanation:-3" title="Permalink"></a></h3><p>Value of variable 2 at a specific time: sol(2, 0.0005) returns the value of the second variable (capacitor voltage uc) at time 0.0005 seconds. Total steps: sol.totalSteps gives the total number of steps taken by the solver to reach the end of the simulation.<br/>Simultaneous steps: sol.simulStepCount provides the number of steps where simultaneous updates occurred.<br/>Total events: sol.evCount gives the total number of events (e.g., switch state changes) during the simulation.<br/>Saved times and variables: sol.savedTimes and sol.savedVars store the time points and corresponding variable values computed during the simulation.</p><h2 id="Step-4:-Plot-the-Solution"><a class="docs-heading-anchor" href="#Step-4:-Plot-the-Solution">Step 4: Plot the Solution</a><a id="Step-4:-Plot-the-Solution-1"></a><a class="docs-heading-anchor-permalink" href="#Step-4:-Plot-the-Solution" title="Permalink"></a></h2><p>Finally, we can plot the solution to visualize the results. We have two options: generate a plot object for further customization or save the plot directly to a file.</p><pre><code class="language-julia hljs"># Generate a plot object for all variables of the solution
plot_obj = getPlot(sol)
# Generate a plot object for variable 1 of the solution
getPlot(sol,1)
# Display the plot
display(plot_obj)


#plot  variables 1 and 2 of the solution
plot_Sol(sol,1,2,note=&quot; &quot;,xlims=(0.0,1.0),ylims=(-0.5,0.5),legend=false) 
#plot  the sum of variables 1 and 2 of the solution
plot_SolSum(sol,1,2)

# Save the plot to a file
save_Sol(sol, note=&quot; &quot;,xlims=(0.0,1.0),ylims=(-0.5,0.5),legend=false)
</code></pre><h3 id="Explanation:-4"><a class="docs-heading-anchor" href="#Explanation:-4">Explanation:</a><a class="docs-heading-anchor-permalink" href="#Explanation:-4" title="Permalink"></a></h3><p>Generate plot object: getPlot(sol) creates a plot object from the solution data. Display the plot: display(plot<em>obj) shows the plot in the current environment. Save the plot: save</em>Sol(sol, &quot;solution<em>plot.png&quot;) saves the plot to a file named solution</em>plot.png.</p><h2 id="User-Documentation"><a class="docs-heading-anchor" href="#User-Documentation">User Documentation</a><a id="User-Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#User-Documentation" title="Permalink"></a></h2><p>More about the user documentation can be found in:</p><ul><li><a href="../interface/#Interface">Interface</a></li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../developperGuide/">developper Guide »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.1 on <span class="colophon-date" title="Monday 8 July 2024 16:47">Monday 8 July 2024</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
